{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Rebartek\\\\cms.webui\\\\src\\\\content\\\\pages\\\\Components\\\\Login\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport PageTitle from '../../../../components/PageTitle';\nimport { useState } from 'react';\nimport { Post } from \"../../../../services/common.service\";\nimport { logout } from \"../../../../services/auth.service\";\nimport { ProfileService } from '../../../../services/profile.service';\nimport { object, string } from 'zod';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport PageTitleWrapper from '../../../../components/PageTitleWrapper';\nimport { Button, Container, Grid, Card, CardHeader, CardContent, Divider, Snackbar, Alert } from '@mui/material';\nimport Footer from '../../../../components/Footer';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport { useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst label = {\n  inputProps: {\n    'aria-label': 'Switch demo'\n  }\n};\n\nfunction LoginForm() {\n  _s();\n\n  logout();\n  let navigate = useNavigate();\n  const [openSuccessAlert, setopenSuccessAlert] = useState(false);\n  const [openErrorAlert, setopenErrorAlert] = useState(false);\n  const [messageSuccess, setMessageSuccess] = useState(\"\");\n  const [messageErorr, setMessageError] = useState(\"\");\n  const initialValues = {\n    username: \"\",\n    password: \"\"\n  };\n  const validationSchema = object({\n    username: string().nonempty('Username is required').min(2, 'Username must be at least 2 characters').max(20, 'Username must not exceed 20 characters'),\n    password: string().nonempty('Password is required').min(6, 'Password must be at least 6 characters').max(40, 'Password must not exceed 40 characters')\n  });\n  const {\n    register,\n    formState: {\n      errors\n    },\n    reset,\n    handleSubmit\n  } = useForm({\n    resolver: zodResolver(validationSchema)\n  });\n\n  const onSubmitHandler = values => {\n    handlePreLogin(values);\n  };\n\n  const handlePreLogin = formValue => {\n    const {\n      username,\n      password\n    } = formValue;\n    Post('user/login', formValue).then(response => {\n      debugger;\n\n      if (response.data.token) {\n        let profile = {\n          UserID: response.data.userId,\n          UserName: response.data.userName,\n          RoleID: response.data.roleId,\n          Token: response.data.token,\n          DepartmentID: response.data.departmentId\n        };\n        ProfileService.setProfile(profile);\n        setMessageSuccess(\"Welcome to College Dashboad!\");\n        setopenSuccessAlert(true);\n        return navigate(\"/\");\n      }\n    }, error => {\n      const resMessage = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n      setMessageError(\"User name or password is invalid!\");\n      setopenErrorAlert(true);\n    });\n  };\n\n  const handleAlertClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setopenSuccessAlert(false);\n    setopenErrorAlert(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      open: openSuccessAlert,\n      autoHideDuration: 5000,\n      onClose: handleAlertClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleAlertClose,\n        variant: \"filled\",\n        severity: \"success\",\n        sx: {\n          width: '100%'\n        },\n        children: messageSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: openErrorAlert,\n      autoHideDuration: 5000,\n      onClose: handleAlertClose,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleAlertClose,\n        variant: \"filled\",\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        children: messageErorr\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(PageTitleWrapper, {\n        children: /*#__PURE__*/_jsxDEV(PageTitle, {\n          heading: \"Login\",\n          subHeading: \"Collage Management System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-form\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          component: \"form\",\n          noValidate: true,\n          autoComplete: \"off\",\n          onSubmit: handleSubmit(onSubmitHandler),\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            direction: \"row\",\n            justifyContent: \"center\",\n            alignItems: \"stretch\",\n            spacing: 6,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                sx: {\n                  px: 12\n                },\n                children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                  title: \"Enter Credentials\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    component: \"form\",\n                    sx: {\n                      '& .MuiTextField-root': {\n                        m: 1,\n                        width: '25ch'\n                      }\n                    },\n                    noValidate: true,\n                    autoComplete: \"off\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        style: {\n                          width: '100%'\n                        },\n                        required: true,\n                        id: \"outlined-required\",\n                        label: \"Username\",\n                        ...register('username'),\n                        fullWidth: true,\n                        error: !!errors['username'],\n                        helperText: errors['username'] ? errors['username'].message : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        style: {\n                          width: '100%'\n                        },\n                        required: true,\n                        id: \"outlined-password-input\",\n                        label: \"Password\",\n                        type: \"password\",\n                        autoComplete: \"current-password\",\n                        ...register('password'),\n                        fullWidth: true,\n                        error: !!errors['password'],\n                        helperText: errors['password'] ? errors['password'].message : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 159,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  sx: {\n                    margin: 1\n                  },\n                  variant: \"contained\",\n                  color: \"primary\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  onClick: () => reset(),\n                  sx: {\n                    margin: 1\n                  },\n                  variant: \"contained\",\n                  color: \"secondary\",\n                  children: \"Reset\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LoginForm, \"XqD2eQZUgL5Bw+JHKf5CbDMHVBA=\", false, function () {\n  return [useNavigate, useForm];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["E:/Projects/Rebartek/cms.webui/src/content/pages/Components/Login/index.tsx"],"names":["PageTitle","useState","Post","logout","ProfileService","object","string","zodResolver","PageTitleWrapper","Button","Container","Grid","Card","CardHeader","CardContent","Divider","Snackbar","Alert","Footer","Box","TextField","useForm","useNavigate","label","inputProps","LoginForm","navigate","openSuccessAlert","setopenSuccessAlert","openErrorAlert","setopenErrorAlert","messageSuccess","setMessageSuccess","messageErorr","setMessageError","initialValues","username","password","validationSchema","nonempty","min","max","register","formState","errors","reset","handleSubmit","resolver","onSubmitHandler","values","handlePreLogin","formValue","then","response","data","token","profile","UserID","userId","UserName","userName","RoleID","roleId","Token","DepartmentID","departmentId","setProfile","error","resMessage","message","toString","handleAlertClose","event","reason","width","px","m","margin"],"mappings":"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","sourcesContent":["import PageTitle from '../../../../components/PageTitle';\r\nimport { useEffect, useState } from 'react';\r\nimport { Post } from \"../../../../services/common.service\";\r\nimport { logout } from \"../../../../services/auth.service\";\r\nimport { ProfileService } from '../../../../services/profile.service';\r\nimport { Profile } from '../../../../types/profile.type';\r\nimport { object, string, number, TypeOf } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport PageTitleWrapper from '../../../../components/PageTitleWrapper';\r\nimport { Button, IconButton, Container, Grid, Card, CardHeader, CardContent, Divider, Autocomplete, Snackbar, Alert } from '@mui/material';\r\nimport Footer from '../../../../components/Footer';\r\n\r\nimport Box from '@mui/material/Box';\r\nimport TextField from '@mui/material/TextField';\r\nimport { useForm, SubmitHandler } from 'react-hook-form';\r\nimport { useNavigate } from 'react-router';\r\nimport { LectureService } from '../../../../services/lecture.service';\r\nimport { profile } from 'console';\r\n\r\nconst label = { inputProps: { 'aria-label': 'Switch demo' } };\r\n\r\nfunction LoginForm() {\r\n    logout();\r\n    let navigate = useNavigate();\r\n    const [openSuccessAlert, setopenSuccessAlert] = useState<boolean>(false);\r\n    const [openErrorAlert, setopenErrorAlert] = useState<boolean>(false);\r\n    const [messageSuccess, setMessageSuccess] = useState<string>(\"\");\r\n    const [messageErorr, setMessageError] = useState<string>(\"\");\r\n    const initialValues: {\r\n        username: string;\r\n        password: string;\r\n    } = {\r\n        username: \"\",\r\n        password: \"\",\r\n    };\r\n    type UserSubmitForm = {\r\n        username: string;\r\n        password: string;\r\n    };\r\n\r\n    const validationSchema = object({\r\n        username: string().nonempty('Username is required')\r\n            .min(2, 'Username must be at least 2 characters')\r\n            .max(20, 'Username must not exceed 20 characters'),\r\n        password: string()\r\n            .nonempty('Password is required')\r\n            .min(6, 'Password must be at least 6 characters')\r\n            .max(40, 'Password must not exceed 40 characters'),\r\n    });\r\n\r\n    const {\r\n        register,\r\n        formState: { errors },\r\n        reset,\r\n        handleSubmit,\r\n    } = useForm<UserSubmitForm>({\r\n        resolver: zodResolver(validationSchema)\r\n    });\r\n \r\n    const onSubmitHandler: SubmitHandler<UserSubmitForm> = (values) => {\r\n        handlePreLogin(values);\r\n    };\r\n\r\n    const handlePreLogin = (formValue: { username: string; password: string }) => {\r\n        const { username, password } = formValue;\r\n        Post('user/login', formValue).then(\r\n            (response: any) => {\r\n                debugger;\r\n                if (response.data.token) {\r\n                    let profile: Profile = {\r\n                       UserID: response.data.userId,\r\n                       UserName: response.data.userName,\r\n                       RoleID: response.data.roleId,\r\n                       Token: response.data.token,\r\n                       DepartmentID: response.data.departmentId,\r\n                    };\r\n                    ProfileService.setProfile(profile);\r\n                    setMessageSuccess(\"Welcome to College Dashboad!\");\r\n                    setopenSuccessAlert(true);\r\n                    return navigate(\"/\");\r\n                }\r\n            },\r\n            (error: any) => {\r\n                const resMessage =\r\n                    (error.response &&\r\n                        error.response.data &&\r\n                        error.response.data.message) ||\r\n                    error.message ||\r\n                    error.toString();\r\n                    setMessageError(\"User name or password is invalid!\");\r\n                    setopenErrorAlert(true);\r\n            }\r\n        );\r\n    };\r\n    const handleAlertClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        setopenSuccessAlert(false);\r\n        setopenErrorAlert(false);\r\n    };\r\n    return (\r\n        <>\r\n        <Snackbar open={openSuccessAlert} autoHideDuration={5000} onClose={handleAlertClose}>\r\n                <Alert onClose={handleAlertClose} variant=\"filled\" severity=\"success\" sx={{ width: '100%' }}>\r\n                    {messageSuccess}\r\n                </Alert>\r\n            </Snackbar>\r\n            <Snackbar open={openErrorAlert} autoHideDuration={5000} onClose={handleAlertClose}>\r\n                <Alert onClose={handleAlertClose} variant=\"filled\" severity=\"error\" sx={{ width: '100%' }}>\r\n                    {messageErorr}\r\n                </Alert>\r\n            </Snackbar>\r\n            <Container maxWidth=\"sm\">\r\n                <PageTitleWrapper>\r\n                    <PageTitle\r\n                        heading=\"Login\"\r\n                        subHeading=\"Collage Management System\"\r\n                    />\r\n                </PageTitleWrapper>\r\n                <div className=\"register-form\">\r\n                    <Box \r\n                        component='form'\r\n                        noValidate\r\n                        autoComplete='off'\r\n                        onSubmit={handleSubmit(onSubmitHandler)}>\r\n                        <Grid\r\n                            container\r\n                            direction=\"row\"\r\n                            justifyContent=\"center\"\r\n                            alignItems=\"stretch\"\r\n                            spacing={6}\r\n                        >\r\n                            <Grid item xs={12}>\r\n                                <Card sx={{ px: 12 }}>\r\n                                    <CardHeader title=\"Enter Credentials\" />\r\n                                    <Divider />\r\n                                    <CardContent>\r\n                                        <Box\r\n                                            component=\"form\"\r\n                                            sx={{\r\n                                                '& .MuiTextField-root': { m: 1, width: '25ch' },\r\n                                            }}\r\n                                            noValidate\r\n                                            autoComplete=\"off\"\r\n                                        >\r\n                                            <div>\r\n                                                <TextField\r\n                                                    style={{ width: '100%' }}\r\n                                                    required\r\n                                                    id=\"outlined-required\"\r\n                                                    label=\"Username\"\r\n                                                    {...register('username')} fullWidth\r\n                                                    error={!!errors['username']}\r\n                                                    helperText={errors['username'] ? errors['username'].message : ''}\r\n                                                />\r\n                                            </div>\r\n                                            <div>\r\n                                                <TextField style={{ width: '100%' }} required\r\n                                                    id=\"outlined-password-input\"\r\n                                                    label=\"Password\"\r\n                                                    type=\"password\"\r\n                                                    autoComplete=\"current-password\"\r\n                                                    {...register('password')} fullWidth\r\n                                                    error={!!errors['password']}\r\n                                                    helperText={errors['password'] ? errors['password'].message : ''}\r\n                                                />\r\n                                            </div>\r\n                                        </Box>\r\n                                    </CardContent>\r\n                                    <Button type=\"submit\" sx={{ margin: 1 }} variant=\"contained\" color=\"primary\">\r\n                                        Submit\r\n                                    </Button>\r\n                                    <Button type=\"button\"\r\n                                        onClick={() => reset()} sx={{ margin: 1 }} variant=\"contained\" color=\"secondary\">\r\n                                        Reset\r\n                                    </Button>\r\n\r\n                                </Card>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    </Box>\r\n                </div>\r\n                <Footer />\r\n            </Container>\r\n        </>\r\n    );\r\n}\r\nexport default LoginForm;\r\n"]},"metadata":{},"sourceType":"module"}